# Data Model: Expanded Documentation Template Options

## DocumentationVariant
- **Fields**
  - `name` (enum: `fumadocs`, `sphinx-shibuya`, `docusaurus`, `none`)
  - `requires_tooling` (set: `node`, `pnpm`, `uv`)
  - `build_command` (string) — command inserted into quickstart/CI
  - `ci_job_id` (string) — GitHub Actions job name for the variant
  - `docs_path` (string) — relative path of generated docs workspace
  - `is_baseline` (bool)
- **Relationships**
  - 1..* -> `DocumentationArtifact`
  - 1..* -> `DocumentationSampleEvidence`
- **Constraints**
  - Exactly one variant flagged `is_baseline=true` per render
  - `name=none` MUST set `requires_tooling=∅` and `build_command` empty

## DocumentationSampleEvidence
- **Fields**
  - `variant_name` (foreign key -> `DocumentationVariant.name`)
  - `render_id` (string) — hash or timestamp of sample render
  - `smoke_status` (enum: `pass`, `fail`, `skipped`)
  - `duration_seconds` (float)
  - `artifact_url` (string) — CI artifact download link
  - `metrics_path` (string) — path to `baseline_quickstart_metrics.json`
- **Constraints**
  - `smoke_status=pass` requires `artifact_url` populated (except `name=none`)
  - Retain history for last N renders (configurable, default 30)

## DocumentationArtifact
- **Fields**
  - `variant_name` (foreign key -> `DocumentationVariant.name`)
  - `ci_run_id` (string)
  - `checksum` (string) — SHA256 of artifact archive
  - `expires_at` (datetime) — derived from CI retention policy
  - `size_mb` (float)
- **Constraints**
  - Stored only in CI artifact storage; not committed to repo
  - Generate warning when `expires_at` < 14 days to prompt refresh

## SupportTicketMetric
- **Fields**
  - `observed_at` (datetime)
  - `ticket_count` (integer)
  - `variance_percent` (float)
  - `threshold_exceeded` (bool)
- **Constraints**
  - Derived from issues labeled “docs setup” within the past 30 days
  - Persisted to `samples/metadata/support_tickets.json` for compliance reviews

## ArtifactExpiryAlert
- **Fields**
  - `variant_name` (foreign key -> `DocumentationVariant.name`)
  - `expires_at` (datetime)
  - `days_remaining` (integer)
  - `warning_emitted` (bool)
- **Constraints**
  - Generated by automation when `days_remaining` < 14
  - Logged to `samples/metadata/doc_publish.json` and surfaced in CI output

## ToolchainProvisioningAttempt
- **Fields**
  - `tool_name` (enum: `node`, `pnpm`, `uv`)
  - `version_requested` (string)
  - `status` (enum: `installed`, `already_present`, `failed`)
  - `stderr` (string) — captured output on failure
  - `next_steps` (string) — remediation text displayed to user
- **Constraints**
  - Logged once per render run inside pre-gen hook for auditability
  - `status=failed` triggers abort of render workflow
