{% if changelog_module == "enabled" -%}
# Commitlint configuration for conventional commit message enforcement
# Generated by Riso template - Feature 014: Changelog & Release Management
# Docs: https://commitlint.js.org/

extends:
  - '@commitlint/config-conventional'

rules:
  # Commit type validation
  type-enum:
    - 2
    - always
    -
      - feat
      - fix
      - docs
      - chore
      - refactor
      - test
      - perf
      - ci
      - build
      - revert

  # Scope validation (optional but must match pattern if present)
  scope-enum:
    - 2
    - always
    -
      - api
      - cli
      - core
      - docs
      - deps
      - release
{% if api_tracks in ['python', 'python+node'] %}
      - fastapi
{% endif %}
{% if api_tracks in ['node', 'python+node'] %}
      - fastify
{% endif %}
{% if graphql_api_module == "enabled" %}
      - graphql
{% endif %}
{% if websocket_module == "enabled" %}
      - websocket
{% endif %}
{% if mcp_module == "enabled" %}
      - mcp
{% endif %}

  # Subject line rules
  subject-max-length:
    - 2
    - always
    - 72

  subject-case:
    - 2
    - never
    - [start-case, pascal-case, upper-case]

  subject-empty:
    - 2
    - never

  # Type required
  type-empty:
    - 2
    - never

  # Formatting rules
  body-leading-blank:
    - 1
    - always

  footer-leading-blank:
    - 1
    - always

# Help URL for commit conventions
helpUrl: 'https://github.com/{{ project_slug }}/blob/main/docs/CONTRIBUTING.md'

# Interactive commit prompt configuration
prompt:
  questions:
    type:
      description: "Select the type of change you're committing"
      enum:
        feat:
          description: 'A new feature'
          title: 'Features'
          emoji: '?'
        fix:
          description: 'A bug fix'
          title: 'Bug Fixes'
          emoji: '??'
        docs:
          description: 'Documentation only changes'
          title: 'Documentation'
          emoji: '??'
        chore:
          description: 'Other changes that don't modify src or test files'
          title: 'Chores'
          emoji: '??'
        refactor:
          description: 'A code change that neither fixes a bug nor adds a feature'
          title: 'Code Refactoring'
          emoji: '??'
        test:
          description: 'Adding missing tests or correcting existing tests'
          title: 'Tests'
          emoji: '?'
        perf:
          description: 'A code change that improves performance'
          title: 'Performance Improvements'
          emoji: '?'
        ci:
          description: 'Changes to CI configuration files and scripts'
          title: 'Continuous Integration'
          emoji: '??'
        build:
          description: 'Changes that affect the build system or external dependencies'
          title: 'Build System'
          emoji: '???'
        revert:
          description: 'Reverts a previous commit'
          title: 'Reverts'
          emoji: '?'
{% endif %}
