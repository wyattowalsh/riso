"""CLI quality smoke tests."""

import pytest

CLI_DISABLED = {{ "True" if cli_module | lower != "enabled" else "False" }}

if CLI_DISABLED:
    pytest.skip("CLI module disabled", allow_module_level=True)

typer_testing = pytest.importorskip(
    "typer.testing",
    reason="Typer CLI dependencies not installed",
)
CliRunner = typer_testing.CliRunner


def test_cli_help_lists_quickstart_command() -> None:
    """CLI help should reference the quickstart command."""
    from {{ package_name }}.cli.__main__ import app  # noqa: PLC0415

    runner = CliRunner()
    result = runner.invoke(app, ["--help"])

    assert result.exit_code == 0
    assert "quickstart" in result.stdout.lower()


def test_quickstart_command_runs_in_dry_mode() -> None:
    """Quickstart command executes without side effects in dry mode."""
    from {{ package_name }}.cli.__main__ import app  # noqa: PLC0415

    runner = CliRunner()
    result = runner.invoke(app, ["quickstart", "--dry-run"])

    assert result.exit_code == 0
    assert "quickstart status: ok" in result.stdout.lower()
