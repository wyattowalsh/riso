name: python-microservice
version: 1.0.0
description: FastAPI microservice template with best practices
author: Riso Team
template_type: project
source_url: https://github.com/example/python-microservice-template

variables:
  project_name:
    type: string
    required: true
    description: Name of the microservice (e.g., user-service)
    pattern: ^[a-z][a-z0-9-]*$
    
  api_version:
    type: string
    required: true
    description: API version
    default: "v1"
    pattern: ^v\d+$
    
  enable_auth:
    type: bool
    required: false
    description: Enable authentication
    default: true
    
  database_type:
    type: choice
    required: true
    description: Database to use
    choices:
      - postgresql
      - mysql
      - mongodb
    default: postgresql
    
  python_version:
    type: choice
    required: true
    description: Python version
    choices:
      - "3.11"
      - "3.12"
      - "3.13"
    default: "3.12"

dependencies:
  - name: fastapi
    version_constraint: ">=0.110.0"
    optional: false
    
  - name: uvicorn
    version_constraint: ">=0.27.0"
    optional: false
    
  - name: pydantic
    version_constraint: ">=2.0.0"
    optional: false
    
  - name: sqlalchemy
    version_constraint: ">=2.0.0"
    optional: true
    condition: "{{ database_type != 'mongodb' }}"

hooks:
  pre_gen:
    - echo "Generating {{ project_name }} microservice..."
    - echo "Python {{ python_version }}, Database: {{ database_type }}"
    
  post_gen:
    - echo "âœ“ Microservice generated successfully!"
    - echo "Next steps:"
    - echo "  1. cd {{ project_name }}"
    - echo "  2. uv sync"
    - echo "  3. uv run uvicorn main:app --reload"

quality:
  enabled: true
  tools:
    - ruff
    - mypy
    - pylint
  strict_mode: false
