{% if mcp_module == 'enabled' %}"""Smoke tests for MCP (Model Context Protocol) module."""

import pytest
from {{ package_name }}.mcp import server


def test_mcp_server_imports():
    """Test that MCP server module can be imported."""
    assert server is not None


def test_mcp_server_has_app():
    """Test that MCP server has FastMCP app instance."""
    assert hasattr(server, "mcp")
    assert server.mcp is not None


def test_mcp_tools_registered():
    """Test that MCP tools are registered."""
    # FastMCP auto-discovers @mcp.tool decorated functions
    # Verify the server has been configured
    assert hasattr(server.mcp, "get_tools") or hasattr(server.mcp, "list_tools")


@pytest.mark.asyncio
async def test_mcp_server_lifecycle():
    """Test MCP server can start and stop without errors."""
    # This is a basic smoke test - actual tool execution
    # should be tested in integration tests
    try:
        # Verify server configuration is valid
        assert server.mcp is not None
        # If there are tools, verify they're callable
        if hasattr(server, "example_tool"):
            assert callable(server.example_tool)
    except Exception as e:
        pytest.fail(f"MCP server lifecycle failed: {e}")


def test_mcp_config_loaded():
    """Test that MCP configuration is accessible."""
    # Verify configuration structure exists
    # Actual config values may come from environment variables
    assert True  # Basic smoke test - module loaded successfully
{% endif %}
