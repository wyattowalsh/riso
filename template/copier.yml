_min_copier_version: "9.1.0"
_template: "."
_faq: true
_answers_file: ".copier-answers.yml"

metadata:
  name: "riso-template"
  version: "0.1.0"
  description: >
    Riso is a modular Copier template that defaults to a lightweight Python 3.11
    stack (uv, pytest, jupyter, ruff, mypy, pylint) and offers opt-in Typer CLI,
    FastAPI/Fastify services, fastmcp integrations, shared logic, and documentation
    variants powered by Fumadocs (Next.js), Sphinx Shibuya, and Docusaurus.
  maintainers:
    - "Riso Template Working Group"
  tags:
    - python
    - typer
    - fastapi
    - fastify
    - uv
    - pnpm
    - fumadocs
    - sphinx-shibuya
    - docusaurus

defaults:
  project_name: "riso-example"
  project_slug: "{{ project_name | replace(' ', '-') | lower }}"
  package_name: "{{ project_slug | replace('-', '_') }}"
  project_layout: "single-package"
  quality_profile: "standard"
  python_versions: ["3.11", "3.12", "3.13"]
  cli_module: "disabled"
  api_tracks: "none"
  graphql_api_module: "disabled"
  mcp_module: "disabled"
  websocket_module: "disabled"
  docs_site: "fumadocs"
  shared_logic: "disabled"
  ci_platform: "github-actions"

prompts:
  project_name:
    type: str
    help: "Human friendly project name"
  project_layout:
    type: str
    help: "Choose the repository layout"
    choices:
      - single-package
      - monorepo
  quality_profile:
    type: str
    help: "Select baseline quality suite profile"
    choices:
      - standard
      - strict
  cli_module:
    type: str
    help: "Enable the Typer CLI scaffolding?"
    choices:
      - disabled
      - enabled
  api_tracks:
    type: str
    help: "Select API tracks to scaffold"
    choices:
      - none
      - python
      - node
      - python+node
  graphql_api_module:
    type: str
    help: "Enable GraphQL API scaffolding (Strawberry)?"
    choices:
      - disabled
      - enabled
    when: "{{ api_tracks in ['python', 'python+node'] }}"
  mcp_module:
    type: str
    help: "Enable fastmcp tooling module?"
    choices:
      - disabled
      - enabled
  websocket_module:
    type: str
    help: "Enable WebSocket real-time communication module?"
    choices:
      - disabled
      - enabled
    when: "{{ api_tracks in ['python', 'python+node'] }}"
  docs_site:
    type: str
    help: "Pick documentation variant"
    choices:
      - fumadocs
      - sphinx-shibuya
      - docusaurus
      - none
  docs_theme_mode:
    type: str
    help: "Default theme appearance (light/dark/auto for system preference)"
    choices:
      - light
      - dark
      - auto
    default: auto
    when: "{{ docs_site != 'none' }}"
  docs_search_provider:
    type: str
    help: "Search integration provider (local = FREE offline search, algolia = FREE tier â†’ PAID, typesense = PAID ~$22/mo)"
    choices:
      - none
      - local
      - algolia
      - typesense
    default: local
    when: "{{ docs_site != 'none' }}"
  docs_api_playground:
    type: str
    help: "Interactive API documentation (swagger/redoc/both) - requires API tracks enabled"
    choices:
      - disabled
      - swagger
      - redoc
      - both
    default: disabled
    when: "{{ api_tracks in ['python', 'node', 'python+node'] }}"
  docs_deploy_target:
    type: str
    help: "Documentation deployment platform (github-pages/netlify/vercel/cloudflare)"
    choices:
      - github-pages
      - netlify
      - vercel
      - cloudflare
    default: github-pages
    when: "{{ docs_site != 'none' }}"
  docs_versioning:
    type: str
    help: "Enable multi-version documentation (ADVANCED: adds complexity, ~2x build time)"
    choices:
      - disabled
      - enabled
    default: disabled
    when: "{{ docs_site != 'none' }}"
  docs_interactive_features:
    type: str
    help: "Enable interactive features (Mermaid diagrams, code playgrounds, live examples)"
    choices:
      - disabled
      - enabled
    default: disabled
    when: "{{ docs_site != 'none' }}"
  docs_quality_gates:
    type: str
    help: "Enable documentation quality validation (link checking, accessibility audits) in CI"
    choices:
      - disabled
      - enabled
    default: enabled
    when: "{{ docs_site != 'none' }}"
  shared_logic:
    type: str
    help: "Generate shared logic package?"
    choices:
      - disabled
      - enabled
  include_databases:
    type: str
    help: "Include PostgreSQL and Redis services in docker-compose?"
    choices:
      - "no"
      - "yes"
    when: "{{ api_tracks in ['python', 'node', 'python+node'] }}"
  ci_platform:
    type: str
    help: "Select CI/CD platform"
    choices:
      - github-actions
      - none

exclude:
  - ".git"
  - ".github"
  - "README.md"
  - "specs/"
  - "config/"
  - "samples/"
  - "scripts/"

tasks:
  post_init:
    - "scripts/hooks/post-init.sh {{ _copier_conf.answers_file }}"
