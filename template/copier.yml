_min_copier_version: "9.1.0"
_template: "."
_faq: true
_answers_file: ".copier-answers.yml"

metadata:
  name: "riso-template"
  version: "0.1.0"
  description: >
    Riso is a modular Copier template that defaults to a lightweight Python 3.11
    stack (uv, pytest, jupyter, ruff, mypy, pylint) and offers opt-in Typer CLI,
    FastAPI/Fastify services, fastmcp integrations, shared logic, and documentation
    variants powered by Fumadocs (Next.js), Sphinx Shibuya, and Docusaurus.
  maintainers:
    - "Riso Template Working Group"
  tags:
    - python
    - typer
    - fastapi
    - fastify
    - uv
    - pnpm
    - fumadocs
    - sphinx-shibuya
    - docusaurus

defaults:
  project_name: "riso-example"
  project_slug: "{{ project_name | replace(' ', '-') | lower }}"
  package_name: "{{ project_slug | replace('-', '_') }}"
  project_layout: "single-package"
  quality_profile: "standard"
  python_versions: ["3.11", "3.12", "3.13"]
  cli_module: "disabled"
  api_tracks: "none"
  rate_limiting_enabled: false
  mcp_module: "disabled"
  docs_site: "fumadocs"
  shared_logic: "disabled"
  ci_platform: "github-actions"

prompts:
  project_name:
    type: str
    help: "Human friendly project name"
  project_layout:
    type: str
    help: "Choose the repository layout"
    choices:
      - single-package
      - monorepo
  quality_profile:
    type: str
    help: "Select baseline quality suite profile"
    choices:
      - standard
      - strict
  cli_module:
    type: str
    help: "Enable the Typer CLI scaffolding?"
    choices:
      - disabled
      - enabled
  api_tracks:
    type: str
    help: "Select API tracks to scaffold"
    choices:
      - none
      - python
      - node
      - python+node
  rate_limiting_enabled:
    type: bool
    help: "Enable API rate limiting with Redis backend?"
    default: false
    when: "{{ api_tracks in ['python', 'python+node'] }}"
  mcp_module:
    type: str
    help: "Enable fastmcp tooling module?"
    choices:
      - disabled
      - enabled
  docs_site:
    type: str
    help: "Pick documentation variant"
    choices:
      - fumadocs
      - sphinx-shibuya
      - docusaurus
      - none
  shared_logic:
    type: str
    help: "Generate shared logic package?"
    choices:
      - disabled
      - enabled
  include_databases:
    type: str
    help: "Include PostgreSQL and Redis services in docker-compose?"
    choices:
      - "no"
      - "yes"
    when: "{{ api_tracks in ['python', 'node', 'python+node'] }}"
  ci_platform:
    type: str
    help: "Select CI/CD platform"
    choices:
      - github-actions
      - none

exclude:
  - ".git"
  - ".github"
  - "README.md"
  - "specs/"
  - "config/"
  - "samples/"
  - "scripts/"

tasks:
  post_init:
    - "scripts/hooks/post-init.sh {{ _copier_conf.answers_file }}"
